{"version":3,"file":"polpware-ngx-sortable.js","sources":["ng://@polpware/ngx-sortable/lib/ngx-sortable.component.ts","ng://@polpware/ngx-sortable/lib/ngx-sortable.module.ts","ng://@polpware/ngx-sortable/public-api.ts","ng://@polpware/ngx-sortable/polpware-ngx-sortable.ts"],"sourcesContent":["import {\n    Component, Input, Output, ContentChild, EventEmitter,\n    TemplateRef, ElementRef\n} from '@angular/core';\n\n@Component({\n    selector: 'polp-ngx-sortable',\n    templateUrl: './ngx-sortable.component.html',\n    styleUrls: []\n})\nexport class NgxSortableComponent {\n    @Input() public items: any[];\n    @Input() public name: string;\n    @Input() public showHeader: boolean = true;\n    @Input() public reRender: boolean = false;\n    @Input() public containerClasses: string = '';\n    @Input() public headerClasses: string = '';\n    @Input() public listClasses: string = '';\n    @Input() public dropzoneClasses: string = '';\n\n    @Output() public listSorted: EventEmitter<any> = new EventEmitter();\n    @ContentChild(TemplateRef) public itemTemplate: TemplateRef<ElementRef>;\n    public selectedItem: any;\n    public draggedIndex: number = -1;\n    public onDragOverIndex: number = -1;\n\n    constructor() {\n    }\n\n    public selectItem(item: any) {\n        this.selectedItem = item;\n    }\n\n    public moveUp() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === 0) {\n            return;\n        }\n        this.swapElements(index, index - 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public moveDown() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === this.items.length - 1) {\n            return;\n        }\n        this.swapElements(index, index + 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public onDrop($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n\n        // index is of the element on which the item is dropped\n        this.handleDrop(index);\n    }\n\n    public allowDrop($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        // index is of the item on which the item is currently hovered\n        this.onDragOverIndex = index;\n    }\n\n    public onDragStart($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        this.draggedIndex = index;\n    }\n\n    public handleDrop(droppedIndex: number) {\n        const item = this.items[this.draggedIndex];\n        // Split the items at the dropped index.\n        const pred = this.items.filter((_, i) => i < droppedIndex && i !== this.draggedIndex);\n        const succ = this.items.filter((_, i) => i >= droppedIndex && i !== this.draggedIndex);\n        // Cmobine them\n        const newItems = [...pred, item, ...succ];\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n\n        this.draggedIndex = -1;\n        this.onDragOverIndex = -1;\n        this.listSorted.emit(this.items);\n    }\n\n    public swapElements(oldIndex: number, newIndex: number) {\n        const newItems = [...this.items];\n        const temp = newItems[oldIndex];\n        newItems[oldIndex] = newItems[newIndex];\n        newItems[newIndex] = temp;\n\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxSortableComponent } from './ngx-sortable.component';\n\n@NgModule({\n    declarations: [NgxSortableComponent],\n    imports: [\n        CommonModule\n    ],\n    exports: [NgxSortableComponent]\n})\nexport class NgxSortableModule { }\n","/*\n * Public API Surface of ngx-sortable\n */\n\nexport * from './lib/ngx-sortable.component';\nexport * from './lib/ngx-sortable.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}