{"version":3,"file":"polpware-ngx-sortable.js","sources":["ng://@polpware/ngx-sortable/lib/ngx-sortable.component.ts","ng://@polpware/ngx-sortable/lib/ngx-sortable.module.ts","ng://@polpware/ngx-sortable/public-api.ts","ng://@polpware/ngx-sortable/polpware-ngx-sortable.ts"],"sourcesContent":["import {\n    Component, Input, Output, ContentChild, EventEmitter,\n    TemplateRef, ElementRef\n} from '@angular/core';\n\n@Component({\n    selector: 'polp-ngx-sortable',\n    templateUrl: './ngx-sortable.component.html',\n    styleUrls: []\n})\nexport class NgxSortableComponent {\n    @Input() public items: any[];\n    @Input() public name: string;\n    @Input() public showHeader: boolean = true;\n    @Input() public reRender: boolean = false;\n    @Input() public containerClasses: string = '';\n    @Input() public headerClasses: string = '';\n    @Input() public listClasses: string = '';\n    @Input() public dropzoneClasses: string = '';\n\n    @Output() public listSorted: EventEmitter<any> = new EventEmitter();\n    @ContentChild(TemplateRef) public itemTemplate: TemplateRef<ElementRef>;\n    public selectedItem: any;\n    public draggedIndex: number = -1;\n    public onDragOverIndex: number = -1;\n\n    constructor() {\n    }\n\n    public selectItem(item: any) {\n        this.selectedItem = item;\n    }\n\n    public moveUp() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === 0) {\n            return;\n        }\n        this.swapElements(index, index - 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public moveDown() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === this.items.length - 1) {\n            return;\n        }\n        this.swapElements(index, index + 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public onDrop($event: any, index: number) {\n        // index is of the element on which the item is dropped\n        this.handleDrop(index);\n    }\n\n    public allowDrop($event: any, index: number) {\n        $event.preventDefault();\n        // index is of the item on which the item is currently hovered\n        this.onDragOverIndex = index;\n    }\n\n    public onDragStart($event: any, index: number) {\n        this.draggedIndex = index;\n    }\n\n    public handleDrop(droppedIndex: number) {\n        const item = this.items[this.draggedIndex];\n        // Split the items at the dropped index.\n        const pred = this.items.filter((_, i) => i < droppedIndex && i !== this.draggedIndex);\n        const succ = this.items.filter((_, i) => i >= droppedIndex && i !== this.draggedIndex);\n        // Cmobine them\n        const newItems = [...pred, item, ...succ];\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n\n        this.draggedIndex = -1;\n        this.onDragOverIndex = -1;\n        this.listSorted.emit(this.items);\n    }\n\n    public swapElements(oldIndex: number, newIndex: number) {\n        const newItems = [...this.items];\n        const temp = newItems[oldIndex];\n        newItems[oldIndex] = newItems[newIndex];\n        newItems[newIndex] = temp;\n\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxSortableComponent } from './ngx-sortable.component';\n\n@NgModule({\n    declarations: [NgxSortableComponent],\n    imports: [\n        CommonModule\n    ],\n    exports: [NgxSortableComponent]\n})\nexport class NgxSortableModule { }\n","/*\n * Public API Surface of ngx-sortable\n */\n\nexport * from './lib/ngx-sortable.component';\nexport * from './lib/ngx-sortable.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;IA0BI;QAbgB,eAAU,GAAY,IAAI,CAAC;QAC3B,aAAQ,GAAY,KAAK,CAAC;QAC1B,qBAAgB,GAAW,EAAE,CAAC;QAC9B,kBAAa,GAAW,EAAE,CAAC;QAC3B,gBAAW,GAAW,EAAE,CAAC;QACzB,oBAAe,GAAW,EAAE,CAAC;QAE5B,eAAU,GAAsB,IAAI,YAAY,EAAE,CAAC;QAG7D,iBAAY,GAAW,CAAC,CAAC,CAAC;QAC1B,oBAAe,GAAW,CAAC,CAAC,CAAC;KAGnC;IAEM,yCAAU,GAAjB,UAAkB,IAAS;QACvB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAEM,qCAAM,GAAb;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,KAAK,KAAK,CAAC,EAAE;YACb,OAAO;SACV;QACD,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QACpC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACpC;IAEM,uCAAQ,GAAf;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,OAAO;SACV;QACD,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QACpC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACpC;IAEM,qCAAM,GAAb,UAAc,MAAW,EAAE,KAAa;;QAEpC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;KAC1B;IAEM,wCAAS,GAAhB,UAAiB,MAAW,EAAE,KAAa;QACvC,MAAM,CAAC,cAAc,EAAE,CAAC;;QAExB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;KAChC;IAEM,0CAAW,GAAlB,UAAmB,MAAW,EAAE,KAAa;QACzC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;KAC7B;IAEM,yCAAU,GAAjB,UAAkB,YAAoB;QAAtC,iBAkBC;QAjBG,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;QAE3C,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,GAAG,YAAY,IAAI,CAAC,KAAK,KAAI,CAAC,YAAY,GAAA,CAAC,CAAC;QACtF,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,IAAI,YAAY,IAAI,CAAC,KAAK,KAAI,CAAC,YAAY,GAAA,CAAC,CAAC;;QAEvF,IAAM,QAAQ,YAAO,IAAI,GAAE,IAAI,GAAK,IAAI,CAAC,CAAC;QAC1C,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAA,CAAC;gBACvB,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;aAC/B,CAAC,CAAC;SACN;aAAM;YACH,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;SACzB;QAED,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACpC;IAEM,2CAAY,GAAnB,UAAoB,QAAgB,EAAE,QAAgB;QAClD,IAAM,QAAQ,YAAO,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,IAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAChC,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACxC,QAAQ,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;QAE1B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAA,CAAC;gBACvB,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;aAC/B,CAAC,CAAC;SACN;aAAM;YACH,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;SACzB;KACJ;IAxFQ;QAAR,KAAK,EAAE;uDAAqB;IACpB;QAAR,KAAK,EAAE;sDAAqB;IACpB;QAAR,KAAK,EAAE;4DAAmC;IAClC;QAAR,KAAK,EAAE;0DAAkC;IACjC;QAAR,KAAK,EAAE;kEAAsC;IACrC;QAAR,KAAK,EAAE;+DAAmC;IAClC;QAAR,KAAK,EAAE;6DAAiC;IAChC;QAAR,KAAK,EAAE;iEAAqC;IAEnC;QAAT,MAAM,EAAE;4DAA2D;IACzC;QAA1B,YAAY,CAAC,WAAW,CAAC;8DAA8C;IAX/D,oBAAoB;QALhC,SAAS,CAAC;YACP,QAAQ,EAAE,mBAAmB;YAC7B,imCAA4C;SAE/C,CAAC;OACW,oBAAoB,CA0FhC;IAAD,2BAAC;CA1FD;;;ICEA;KAAkC;IAArB,iBAAiB;QAP7B,QAAQ,CAAC;YACN,YAAY,EAAE,CAAC,oBAAoB,CAAC;YACpC,OAAO,EAAE;gBACL,YAAY;aACf;YACD,OAAO,EAAE,CAAC,oBAAoB,CAAC;SAClC,CAAC;OACW,iBAAiB,CAAI;IAAD,wBAAC;CAAlC;;ACZA;;;;ACAA;;;;;;"}