{"version":3,"file":"polpware-ngx-sortable.js","sources":["ng://@polpware/ngx-sortable/lib/ngx-sortable.component.html","ng://@polpware/ngx-sortable/lib/ngx-sortable.component.ts","ng://@polpware/ngx-sortable/lib/ngx-sortable.module.ts","ng://@polpware/ngx-sortable/public-api.ts","ng://@polpware/ngx-sortable/polpware-ngx-sortable.ts"],"sourcesContent":["<div class=\"sortable-container\" [ngClass]=\"containerClasses\">\n    <div class=\"sortable-header\" [ngClass]=\"headerClasses\" *ngIf=\"showHeader\">\n        <label class=\"sortable-name\">{{name}}</label>\n        <div class=\"sortable-buttons\">\n            <button (click)=\"moveUp()\" [disabled]=\"!selectedItem\" title=\"Move Up\">&#8679;</button>\n            <button (click)=\"moveDown()\" [disabled]=\"!selectedItem\" title=\"Move Down\">&#8681;</button>\n        </div>\n    </div>\n    <ul class=\"sortable-list\" [ngClass]=\"listClasses\"> \n        <li draggable=\"true\" (click)=\"selectItem(item)\" *ngFor=\"let item of items; let i = index;\"\n            [ngClass]=\"{'active': item == selectedItem}\" (drop)=\"onDrop($event, i)\" (dragover)=\"allowDrop($event,i)\"\n            (dragstart)=\"onDragStart($event, i)\">\n            <div class=\"drop-zone\" [ngClass]=\"dropzoneClasses\" *ngIf=\"onDragOverIndex == i\">\n            </div>\n            <ng-template ngFor [ngForOf]=\"[item]\" [ngForTemplate]=\"itemTemplate\">\n            </ng-template>\n        </li>\n    </ul>\n</div>\n","import {\n    Component, Input, Output, ContentChild, EventEmitter,\n    TemplateRef, ElementRef\n} from '@angular/core';\n\n@Component({\n    selector: 'polp-ngx-sortable',\n    templateUrl: './ngx-sortable.component.html',\n    styleUrls: []\n})\nexport class NgxSortableComponent {\n    @Input() public items: any[];\n    @Input() public name: string;\n    @Input() public showHeader: boolean = true;\n    @Input() public reRender: boolean = false;\n    @Input() public containerClasses: string = '';\n    @Input() public headerClasses: string = '';\n    @Input() public listClasses: string = '';\n    @Input() public dropzoneClasses: string = '';\n\n    @Output() public listSorted: EventEmitter<any> = new EventEmitter();\n    @ContentChild(TemplateRef) public itemTemplate: TemplateRef<ElementRef>;\n    public selectedItem: any;\n    public draggedIndex: number = -1;\n    public onDragOverIndex: number = -1;\n\n    constructor() {\n    }\n\n    public selectItem(item: any) {\n        this.selectedItem = item;\n    }\n\n    public moveUp() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === 0) {\n            return;\n        }\n        this.swapElements(index, index - 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public moveDown() {\n        const index = this.items.indexOf(this.selectedItem);\n        if (index === this.items.length - 1) {\n            return;\n        }\n        this.swapElements(index, index + 1);\n        this.listSorted.emit(this.items);\n    }\n\n    public onDrop($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n\n        // index is of the element on which the item is dropped\n        this.handleDrop(index);\n    }\n\n    public allowDrop($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        // index is of the item on which the item is currently hovered\n        this.onDragOverIndex = index;\n    }\n\n    public onDragStart($event: any, index: number) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        this.draggedIndex = index;\n    }\n\n    public handleDrop(droppedIndex: number) {\n        const item = this.items[this.draggedIndex];\n        // Split the items at the dropped index.\n        const pred = this.items.filter((_, i) => i < droppedIndex && i !== this.draggedIndex);\n        const succ = this.items.filter((_, i) => i >= droppedIndex && i !== this.draggedIndex);\n        // Cmobine them\n        const newItems = [...pred, item, ...succ];\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n\n        this.draggedIndex = -1;\n        this.onDragOverIndex = -1;\n        this.listSorted.emit(this.items);\n    }\n\n    public swapElements(oldIndex: number, newIndex: number) {\n        const newItems = [...this.items];\n        const temp = newItems[oldIndex];\n        newItems[oldIndex] = newItems[newIndex];\n        newItems[newIndex] = temp;\n\n        if (this.reRender) {\n            this.items = newItems.map(a => {\n                return Object.assign({}, a);\n            });\n        } else {\n            this.items = newItems;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxSortableComponent } from './ngx-sortable.component';\n\n@NgModule({\n    declarations: [NgxSortableComponent],\n    imports: [\n        CommonModule\n    ],\n    exports: [NgxSortableComponent]\n})\nexport class NgxSortableModule { }\n","/*\n * Public API Surface of ngx-sortable\n */\n\nexport * from './lib/ngx-sortable.component';\nexport * from './lib/ngx-sortable.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵlistener","i0.ɵɵproperty","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵelement","i0.ɵɵtemplate"],"mappings":"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"}